{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAUC,SAASC,cAAc,aACjCC,EAAkBH,EAAQE,cAAc,UAE9CJ,EAAAM,OAAOC,KAAK,CACVC,SAAU,OACVC,cAAc,EACdC,kBAAmB,aACnBC,SAAU,OACVC,MAAO,IACPC,QAAS,CACPC,WAAY,aAIhB,MAWMC,EAAgB,CAACC,EAAUJ,IAC/B,IAAIK,SAAQ,CAACC,EAASC,KACpB,MAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,KACLH,EACFF,EAAQ,C,SAAEF,E,MAAUJ,IAEpBO,EAAO,C,SAAEH,E,MAAUJ,GAAQ,GAE5BA,EAAM,IAGPY,EAAsB,KAC1B,MAAQZ,MAAAa,EAAKC,KAAEA,EAAIC,OAAEA,GAzBC,MACtB,MAAMC,EAAiB,GAOvB,OANiB,IAAIC,SAAS3B,GAErB4B,SAAQ,CAACC,EAAOC,KACvBJ,EAAeI,GAAOC,OAAOF,EAAM,IAG9BH,CAAc,EAiBWM,GAChC,IAAIC,EAAiBV,EAErB,IAAK,IAAIW,EAAI,EAAGA,GAAKT,EAAQS,GAAK,EAChCrB,EAAcqB,EAAGD,GACdE,MAAK,EAACrB,SAAEA,EAAQJ,MAAEA,MACjBZ,EAAAM,OAAOgC,QAAQ,qBAAqBtB,QAAeJ,MAAU,IAE9D2B,OAAM,EAACvB,SAAEA,EAAQJ,MAAEA,MAClBZ,EAAAM,OAAOO,QAAQ,oBAAoBG,QAAeJ,MAAU,IAE7D4B,SAAQ,KACHJ,IAAMT,GAAQc,GAAyB,IAG/CN,GAAkBT,C,EAIhBe,EAA0B,KAC9BpC,EAAgBqC,gBAAgB,WAAW,EAU7CxC,EAAQyC,iBAAiB,UAPJC,IACnBA,EAAMC,iBAENrB,IACAiB,GAAyB","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formRef = document.querySelector('form.form');\nconst submitButtonRef = formRef.querySelector('button');\n\nNotify.init({\n  distance: '20px',\n  clickToClose: true,\n  cssAnimationStyle: 'from-right',\n  fontSize: '14px',\n  delay: 4000,\n  failure: {\n    background: '#ff4432',\n  },\n});\n\nconst collectFormData = () => {\n  const formDataObject = {};\n  const formData = new FormData(formRef);\n\n  formData.forEach((value, key) => {\n    formDataObject[key] = Number(value);\n  });\n\n  return formDataObject;\n};\n\nconst createPromise = (position, delay) =>\n  new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n\nconst createPromisesQueue = () => {\n  const { delay, step, amount } = collectFormData();\n  let iterationDelay = delay;\n\n  for (let i = 1; i <= amount; i += 1) {\n    createPromise(i, iterationDelay)\n      .then(({ position, delay }) => {\n        Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n      })\n      .finally(() => {\n        if (i === amount) toggleSubmitButtonState();\n      });\n\n    iterationDelay += step;\n  }\n};\n\nconst toggleSubmitButtonState = () => {\n  submitButtonRef.toggleAttribute('disabled');\n};\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n\n  createPromisesQueue();\n  toggleSubmitButtonState();\n};\n\nformRef.addEventListener('submit', onFormSubmit);\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$formRef","document","querySelector","$47d4ff9957288465$var$submitButtonRef","Notify","init","distance","clickToClose","cssAnimationStyle","fontSize","delay","failure","background","$47d4ff9957288465$var$createPromise","position","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","$47d4ff9957288465$var$createPromisesQueue","delay1","step","amount","formDataObject","FormData","forEach","value","key","Number","$47d4ff9957288465$var$collectFormData","iterationDelay","i","then","success","catch","finally","$47d4ff9957288465$var$toggleSubmitButtonState","toggleAttribute","addEventListener","event","preventDefault"],"version":3,"file":"03-promises.83595b7b.js.map"}