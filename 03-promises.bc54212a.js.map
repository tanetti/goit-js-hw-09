{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAUC,SAASC,cAAc,aAEvCJ,EAAAK,OAAOC,KAAK,CACVC,SAAU,OACVC,cAAc,EACdC,kBAAmB,aACnBC,SAAU,OACVC,MAAO,IACPC,QAAS,CACPC,WAAY,aAIhB,IAwBMC,EAAsB,SAAAC,GAI1B,I,kBAjBoB,IAACC,EAAUL,GAAVK,EAkBLC,EAlBeN,EAkBZO,EAjBnB,IAAIC,SAAQ,SAACC,EAASC,GACpB,IAAMC,EAAgBC,KAAKC,SAAW,GAEtCC,YAAW,WACLH,EACFF,EAAQ,CAAEJ,WAAUL,UAEpBU,EAAO,CAAEL,WAAUL,S,GAEpBA,E,KASAe,MAAK,SAAAC,G,IAAGX,EAAQW,EAARX,SAAUL,EAAKgB,EAALhB,MACjBX,EAAAK,OAAOuB,QAAQ,qBAAoCC,OAAfb,EAAS,QAAYa,OAANlB,EAAM,M,IAE1DmB,OAAM,SAAAH,G,IAAGX,EAAQW,EAARX,SAAUL,EAAKgB,EAALhB,MAClBX,EAAAK,OAAOO,QAAQ,oBAAmCiB,OAAfb,EAAS,QAAYa,OAANlB,EAAM,M,IAEzDoB,SAAQ,WACHd,IAAMe,GAAQC,EAAwBlB,E,IAG9CG,GAAkBgB,C,EAfYC,EAzBV,SAAApB,GACtB,IAAMqB,EAAiB,GAOvB,OANiB,IAAIC,SAAStB,GAErBuB,SAAQ,SAACC,EAAOC,GACvBJ,EAAeI,GAAOC,OAAOF,E,IAGxBH,C,CAiByBM,CAAgB3B,GAAxC4B,EAAwBR,EAAxBxB,MAAOuB,EAAiBC,EAAjBD,KAAMF,EAAWG,EAAXH,OACjBd,EAAiByB,EAEZC,EAAI,EAAGA,GAAKZ,EAAQY,GAAK,EAACC,EAAAD,E,EAgB/BX,EAA0B,SAAAlB,GACNA,EAAKX,cAAc,UAC3B0C,gBAAgB,W,EAWlC5C,EAAQ6C,iBAAiB,UARJ,SAAAC,GACnBA,EAAMC,iBACN,IAAMlC,EAAOiC,EAAME,cAEnBpC,EAAoBC,GACpBkB,EAAwBlB,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formRef = document.querySelector('form.form');\n\nNotify.init({\n  distance: '20px',\n  clickToClose: true,\n  cssAnimationStyle: 'from-right',\n  fontSize: '14px',\n  delay: 4000,\n  failure: {\n    background: '#ff4432',\n  },\n});\n\nconst collectFormData = form => {\n  const formDataObject = {};\n  const formData = new FormData(form);\n\n  formData.forEach((value, key) => {\n    formDataObject[key] = Number(value);\n  });\n\n  return formDataObject;\n};\n\nconst createPromise = (position, delay) =>\n  new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n\nconst createPromisesQueue = form => {\n  const { delay, step, amount } = collectFormData(form);\n  let iterationDelay = delay;\n\n  for (let i = 1; i <= amount; i += 1) {\n    createPromise(i, iterationDelay)\n      .then(({ position, delay }) => {\n        Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n      })\n      .finally(() => {\n        if (i === amount) toggleSubmitButtonState(form);\n      });\n\n    iterationDelay += step;\n  }\n};\n\nconst toggleSubmitButtonState = form => {\n  const submitButtonRef = form.querySelector('button');\n  submitButtonRef.toggleAttribute('disabled');\n};\n\nconst onFormSubmit = event => {\n  event.preventDefault();\n  const form = event.currentTarget;\n\n  createPromisesQueue(form);\n  toggleSubmitButtonState(form);\n};\n\nformRef.addEventListener('submit', onFormSubmit);\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$formRef","document","querySelector","Notify","init","distance","clickToClose","cssAnimationStyle","fontSize","delay","failure","background","$ce04d3a99e08e73b$var$createPromisesQueue","form","position","i","iterationDelay","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","then","param","success","concat","catch","finally","amount","$ce04d3a99e08e73b$var$toggleSubmitButtonState","step","ref","formDataObject","FormData","forEach","value","key","Number","$ce04d3a99e08e73b$var$collectFormData","delay1","i1","_loop","toggleAttribute","addEventListener","event","preventDefault","currentTarget"],"version":3,"file":"03-promises.bc54212a.js.map"}