!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return o[e]=i,t.call(i.exports,i,i.exports),i.exports}var u=new Error("Cannot find module '"+e+"'");throw u.code="MODULE_NOT_FOUND",u}).register=function(e,t){n[e]=t},t.parcelRequired7c6=i);var u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var r={};function a(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,o){t&&a(e.prototype,t);o&&a(e,o);return e};var l=i("h6c0i"),s=document.querySelector("form.form");l.Notify.init({distance:"20px",clickToClose:!0,cssAnimationStyle:"from-right",fontSize:"14px",delay:4e3,failure:{background:"#ff4432"}});var c=new(function(){"use strict";function t(o){e(u)(this,t),this.form=null,this.delay=null,this.step=null,this.amount=null,this.onSuccess=null==o?void 0:o.onSuccess,this.onFailure=null==o?void 0:o.onFailure}return e(r)(t,[{key:"start",value:function(e){this.form=e,this.form?(this.collectFormData(),this.delay?this.step?this.amount?(this.toggleSubmitButtonState(),this.createPromisesQueue()):l.Notify.failure("Amount value not found!"):l.Notify.failure("Step value not found!"):l.Notify.failure("Delay value not found!")):l.Notify.failure("Target Form not found!")}},{key:"collectFormData",value:function(){var e=this;new FormData(this.form).forEach((function(t,o){e[o]=Number(t)}))}},{key:"toggleSubmitButtonState",value:function(){this.form.querySelector('[type="submit"]').toggleAttribute("disabled")}},{key:"createPromisesQueue",value:function(){for(var e=this,t=function(t){var n=e;e.createPromise(t,o).then((function(e){var t=e.position,o=e.delay;n.successNotification("Fulfilled promise ".concat(t," in ").concat(o,"ms"))})).catch((function(e){var t=e.position,o=e.delay;n.failureNotification("Rejected promise ".concat(t," in ").concat(o,"ms"))})).finally((function(){t===n.amount&&n.toggleSubmitButtonState()})),o+=e.step},o=this.delay,n=1;n<=this.amount;n+=1)t(n)}},{key:"createPromise",value:function(e,t){return new Promise((function(o,n){var i=Math.random()>.3;setTimeout((function(){i?o({position:e,delay:t}):n({position:e,delay:t})}),t)}))}},{key:"successNotification",value:function(e){this.onSuccess?this.onSuccess(e):alert(e)}},{key:"failureNotification",value:function(e){this.onFailure?this.onFailure(e):alert(e)}}]),t}())({onSuccess:l.Notify.success,onFailure:l.Notify.failure});s.addEventListener("submit",(function(e){e.preventDefault(),c.start(e.currentTarget)}))}();
//# sourceMappingURL=03-promises.c9f8c94f.js.map
